sudo: required
matrix:
  include:
  - language: node_js
    node_js: lts/*
    cache:
      directories:
      - node_modules
    before_install:
    - npm install -g firebase-tools
    - cd code/web/
    - npm install
    script:
    - npm test
    after_success:
    - travis_wait 40 npm run build
    - firebase use default --token $FIREBASE_TOKEN
    - travis_wait firebase deploy -m "Travis deploy" --non-interactive --token $FIREBASE_TOKEN
    on:
      branch:
      - dev
      project: kaagapai-dev
  - language: node_js
    node_js: lts/*
    services: mysql
    cache:
      directories:
      - node_modules
    before_install:
    - cd code/api
    - npm install
    script: 'true'
    deploy:
      provider: heroku
      api_key:
        secure: MMLyvGNJzKAFeBjWNs2mQ6fGy7VzXZLg5PVKnXEnT/BBtpWRfJQwBVnuWsyblRnLxDOiFZih0Kl43edPgCT3pCEZFXgZ+QxeHHAobSIFo/E0HosS/TEhsQREqkDgOeDUt6ssTXxvtqpiyQL9CSzxtA63vumlwN2vCffeNy3cW7fpHUvWcVLCysk1x/ZZggQ6nrhZmLWpPNOQ9izta159PSJhGRNCzVXKqv1ZgFZeHT2BvDafyIZltVuWgpwwcR5gWB4Yq1GAhxfkx4yk5U59roKCIuly6eo+9plgkDXfyEE2zpMYUGLde2yxOeixeBWJrRFDGfBiOcVYavw+WZU/UnXRno5ULg0XS0V8l/vVVavhj439RwBUTt7/Pu0D+tV96CxZjiEhtWKYDpbXRzcZOPE6/ATQA3rmLQjmlR+Zxtk/vyGGMB/lwZTeY8hqOl9MnarKetrbaqoe39SZfriT/QPWxUGQb8MMUjYRcDk914T7P7PB+SMiyvG8MbS7HknV/39LrKseZeDZ0Y24h2ubzsVi5Cz11zVogWM+m8H8S7A5GbRzu4xYcJ0F2zEmcewHBdbV+Obv/fyeeQLv2b8Z1H/v04skklErUEDFUhw6MXQjx96L4sx1m8WHpJ2Z3ar45DhaQ+D0Z9H1IzKeutDykkXXJvUiDtZ6uGllZam7McU=
      app:
        dev: kaagapai-dev
      on:
        repo: prometheus-tech/kaagapAI
        branches:
          only:
          - dev
notifications:
  email:
  - 2164149@slu.edu.ph
  - 2161495@slu.edu.ph
  - 2160809@slu.edu.ph
  - 2160120@slu.edu.ph
  - 2161745@slu.edu.ph
  - 2161436@slu.edu.ph
  - 2161794@slu.edu.ph

