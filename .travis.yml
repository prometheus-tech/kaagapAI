sudo: required
matrix:
  include:
    - language: node_js
      node_js: lts/*
      cache:
        directories:
          - node_modules
      before_install:
        - npm install -g firebase-tools
        - cd code/web/
        - npm install
      script:
        - npm test
      after_success:
        - travis_wait 40 npm run build
        - firebase use default --token $FIREBASE_TOKEN
        - travis_wait firebase deploy -m "Travis deploy" --non-interactive --token $FIREBASE_TOKEN
      on:
        branch:
          - dev
        project: kaagapai
    - language: node_js
      node_js: lts/*
      services: mysql
      cache:
        directories:
          - node_modules
      before_install:
        - cd code/api
        - npm install
      script: "true"
      deploy:
        provider: heroku
        api_key:
          secure: hZAjqOoDizbdKFMScRChg3jEFvf7erX+GLZaK6ejIbGUVbtiLE/Rt90VqTeaoHtLx41YcJwXsEcQNFB6UJ5fSXEbp2ogCvkgjej/W2Jw6IVuBVHlT1bdLkZX5TtUbFNyZsUN7cgariF5LkouvHISsgMQZi0KaW9tPbbd/TWBHEl6M3pqd8wswzQn/20e7RlXaADkH3hofN3FyLxSXKiDpfCTNjhdk6cACrPweFgrUuJziJik92yPW5LdQXhKb4cPOHCU8YhU4Nwq5dnUhm+r1U3sCbwvJIp4laK/uPfYtW1/M+fVjpl28iq4QXr1Xo23Nm49OlLJ43DFHsZuqiyeDJ1Gq8Kfn/Ubo7gMgTuu1pxqNbBmmtTqvyz9jWh9+2FHmiHkOg0jUhD6V1bxVp4uP25GYCyIz81kiGC2bulW4jngjtJrERQ0JMmsqaox2p/VJCWdlS+kKXD1UozIrzjRm0JJBwCqxmLjc6uRz4WH2A5sKGTMHtenhHMkvTW1M4hTrNOFwrJBU/Z2S39jmnTWzIY3s4Un1+IIq2HZ1AKArG8p0IgyviXy3oDY16DP+LmgW+lqdw4/N2wd85suow2kWxtpTKwBUQYoAWnnj45w4cul0kcZ+j5Jt1n+obXQuE9Jic9SGnNuOLgLQpvMrU2plvRM9i8s1C8kP/qVpRkLcOI=
        app:
          dev: kaagapai-dev
        on:
          repo: prometheus-tech/kaagapAI
          branches:
            only:
              - dev
notifications:
  email:
    - 2164149@slu.edu.ph
    - 2161495@slu.edu.ph
    - 2160809@slu.edu.ph
    - 2160120@slu.edu.ph
    - 2161745@slu.edu.ph
    - 2161436@slu.edu.ph
    - 2161794@slu.edu.ph
