sudo: required
matrix:
  include:
  - language: node_js
    node_js: lts/*
    cache:
      directories:
      - node_modules
    before_install:
    - npm install -g firebase-tools
    - cd code/web/
    script:
    - npm test
    after_success:
    - travis_wait 40 npm run build
    - firebase use default --token $FIREBASE_TOKEN
    - travis_wait firebase deploy -m "Travis deploy" --non-interactive --token $FIREBASE_TOKEN
    on:
      branch:
      - dev
      project: kaagapai-dev
  - language: node_js
    node_js: lts/*
    services: mysql
    cache:
      directories:
      - node_modules
    before_install:
    - cd code/api
    - npm install
    script: 'true'
    deploy:
      provider: heroku
      api_key:
        secure: rgZwskH/y/Z4dc9YH6wfZ+/nmYcFUtFqBbEkFHe9nqv+dxRuzhemRWWyWuBqvb9nHYQGrUWQnMMX1bZgfBkajOhRgMgVcNIK0aVb0QX8dMiU5YHo/T8YuSrph4wau+tA256yLTPbHcbTABxXaPvkpmCdjQI9GpgmZmI7ahXVHwW9g032R4PEeJkMy9+hD3JXBFByTxqrXv2nqWimRZqRMm6yplYOaycQm9PuGMMQNly+PH9ApUfYDD+2AAPDLiUh6gk17UHrTZHOCIZORBuT1uQqZ69mpOKL+AP3vqhO0X1XgEZtbCg4kbdi6nPzcRV3bc5Ma/53PxNzMDccYHURppV5tiCSsQUtSWpoKTak4x8h/grvWbk5FjbopBAlDddVfNVDw1jzsAZRN4wmjwuJ2L9EK50Pl8DwXh2Pl1GxckLP1W32HQo8vHTRjj6Ch5xFUJ4XVg68Ex7F7OZRY0u88CyaDUC670x6nd63b3hxWg9Ei/W/7MFuHkbcdFyhe15lZYyX533vMkZMB4l9DDdSXcOV/SFHJ3hXHVUR5ZlQGzl3gIWsnhad1V1tFDbJOT4AXoHO3lR9wNGcGyhfrCjTP45wDwecxEi/dbQju2Jc3YP4ZNPO3By3ersvbhZGJNtrBpSSmIr+FDQL57w74UZrjQ0RvyUOFHtIA3/lQHIYwhs=
      app:
        dev: kaagapai-dev
      on:
        repo: prometheus-tech/kaagapAI
        branches:
          only:
          - dev
notifications:
  email:
  - 2164149@slu.edu.ph
  - 2161495@slu.edu.ph
  - 2160809@slu.edu.ph
  - 2160120@slu.edu.ph
  - 2161745@slu.edu.ph
  - 2161436@slu.edu.ph
  - 2161794@slu.edu.ph
