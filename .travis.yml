sudo: required
matrix:
  include:
    - language: node_js
      node_js: lts/*
      cache:
        directories:
          - node_modules
      before_install:
        - npm install -g firebase-tools
        - cd code/web/
        - npm install
      script:
        - npm test
      after_success:
        - travis_wait 40 npm run build
        - firebase use default --token $FIREBASE_TOKEN
        - travis_wait firebase deploy -m "Travis deploy" --non-interactive --token $FIREBASE_TOKEN
      on:
        branch:
          - dev
        project: kaagapai-dev
    - language: node_js
      node_js: lts/*
      services: mysql
      cache:
        directories:
          - node_modules
      before_install:
        - cd code/api
        - npm install
      script: "true"
      deploy:
        provider: heroku
        api_key:
          secure: OJIXbEEPJyU2S/w7TQQ0xC5k04j0bPhIQypF0rIUIyQ2XtmlTjZ+6pZrxiEUZvT+P2uDpk+2fhLJs4xqVGkNI9RWA4yxqrF7o+XIXvG5H7YZs5auZV6K+b64aPpTyRos9onEMCkDkA9ghuoeOVYsac3QCPOdN+z0EUoSNd5EkZPl2zSSGkWX6z8yY6JXWROfy/9zr3yDYWKa3XF3oktUAwRmqZeoLOa17w01fHPtauFeIUpv4wKSTOfxOKOVRwaS0jlRd6zbyI7J9FV9V+aBox/dt4v6A5TYQL0IPVlSzJmDcmHv/Gdy0lieaJlubYYfh+Cw7DndM90fjBKJUG+1G8NuMeEEoWCNOS6RpTlF25FsiEs7KVLdIgI4L9zeOL7sGZxI4St33KDwGjPtG4QKE1drW0Q9N4ltFE+m8xTQeTvJXo4/r+U5Pq/W8BKGKkFdsb9vR/4iC4q69CAriMEb0PFvfZWfEDVCrqTYslOPQb7R/KIUwNBp7MQcyrjldwkzFbPWDG0vSz0lbj6Qs1YurDlGfY3xMTDbpNcDecICO/RPPo6h+yvNWRT7edDRTsHa+LPXWOVB2sJLoVMXQNDCxo825TfsgtZdrmOR7QNuh2FLHyickCHrUlZ45eCWAF7v4kjfDT50gnv3Iak6dPh6kbR2eZQNPDsPpWgg7IqDjiU=
        app:
          dev: kaagapai-dev
        on:
          repo: prometheus-tech/kaagapAI
          branches:
            only:
              - dev
notifications:
  email:
    - 2164149@slu.edu.ph
    - 2161495@slu.edu.ph
    - 2160809@slu.edu.ph
    - 2160120@slu.edu.ph
    - 2161745@slu.edu.ph
    - 2161436@slu.edu.ph
    - 2161794@slu.edu.ph
