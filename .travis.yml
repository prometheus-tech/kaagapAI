sudo: required
matrix:
  include:
    - language: node_js
      node_js: lts/*
      cache:
        directories:
          - node_modules
      before_install:
        - npm install -g firebase-tools
        - cd code/web/
        - npm install
      script:
        - npm test
      after_success:
        - travis_wait 40 npm run build
        - firebase use default --token $FIREBASE_TOKEN
        - travis_wait firebase deploy -m "Travis deploy" --non-interactive --token $FIREBASE_TOKEN
      on:
        branch:
          - dev
        project: kaagapai-dev
    - language: node_js
      node_js: lts/*
      services: mysql
      cache:
        directories:
          - node_modules
      before_install:
        - cd code/api
        - npm install
      script: "true"
      deploy:
        provider: heroku
        api_key:
          secure: mbLi8eUAeHudHd+JwmwFglMnKOGPzyC19+wH9KoRiF4LNuicYPHvsVqprSjSj0ZVFCgGd5c8J0fKRHjDNuQe599nAzgdn5xKUrKTqedQYJcYbY9kjnnySFEV7t97s1hxSQJd0lflNOsxtQ1u+WLk1fdKegvo35qhKjsgi9uRD68f7ZGZ03vT0AkT16k4kfO0aH02fEGeERBVcVtCx6BS1bKLUrQv8rvgPhZt71afKo4onScUAc0DQk7BSJG3k1niIPrTzyl/7fA211rDPYO4PffPDR50naVYYbm03kvp8szccWSwATmsRgwvtxy1ROidc/U8tSza7S6YOtMTOqsw1/uVZP9yDgNYVVpDUDSO+coE+jK6izYNMCLZaseGPVxo7Jzk2zFTZtiWT7Xwu9WEtnxpEYjabTZ/RyfVoF5JYzL/PhCBR7oeR3rlDh5nPebgDo00eb4zT4WdWuO8d+u57xKqbzZFgZD4vGiFJdZphaW9gmAlqQCoTmdrXMchR9FaoNGeWqkX2yvJu7FQ7G8oHxF3/KKjBZn6y8g3vdPfbGVlrM2QKnCgjQLVOGG2gryoOgZdVvOi72LaXhpLrxW2/iTv5Q8W/YbFcaTwJzbgY4TwUDFo/fHeuZJZGpyIguOnE1Xk7+7kuMDObKVZLazN/VFH+T9BrwHarPlXSzIcElI=
        app:
          dev: kaagapai-dev
        on:
          repo: prometheus-tech/kaagapAI
          branches:
            only:
              - dev
notifications:
  email:
    - 2164149@slu.edu.ph
    - 2161495@slu.edu.ph
    - 2160809@slu.edu.ph
    - 2160120@slu.edu.ph
    - 2161745@slu.edu.ph
    - 2161436@slu.edu.ph
    - 2161794@slu.edu.ph
