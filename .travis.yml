sudo: required
matrix:
  include:
    - language: node_js
      node_js: lts/*
      cache:
        directories:
          - node_modules
      before_install:
        - npm install -g firebase-tools
        - cd code/web/
        - npm install
      script:
        - npm test
      after_success:
        - travis_wait 40 npm run build
        - firebase use default --token $FIREBASE_TOKEN
        - travis_wait firebase deploy -m "Travis deploy" --non-interactive --token $FIREBASE_TOKEN
      on:
        branch:
          - dev
        project: kaagapai-dev
    - language: node_js
      node_js: lts/*
      services: mysql
      cache:
        directories:
          - node_modules
      before_install:
        - cd code/api
        - npm install
      script: "true"
      deploy:
        provider: heroku
        api_key:
          secure: XoFQ71ahu47bXti7KMStgHOZ5j78FoQeXTrmvgKT1HVVx29MfRba+hO/zKf4qCpQOjrMSHDg8AOHE0MlQ2mjK44gj+MiYypVVuJBDNcIg9SFyf7wahjljn+HWmmMVy/4jtIVEuvqFfNo0VQj6Mb39d+esQ1ntOO3ehx29IBIukwVIApDqvEvZmK6yPA6lQZIYRdAciTmNwk1U/ZW063UZozEsn6MLSKRwVYcitJk/t/oHI9YepcLaksnVa/WJB7l5IUS7owVozkeQ66bpO/qrj5cnb/YCkvLS7H57Lz4DpqAphuAozRJNNW3GJS8v/tJsxMnC8v7J9OIoAhQ2t+CjU/NUUmid7eYj/vEcKgh9HdNYbXozRacRDQKSf3ACoZQIr2mBSRXj8saH1V3ISWUbNCAbQjDAtggljRa3enahPiwfSa48i7HiVNWNXmdBihCL7TxkX2zVvnwYxO9eXdkMNaexAxFjG3FlGXxxQn8bzg3ac8un65xHjbzyazlK+r5hrZPVCcr61bCm0Md0F2ZEtkdJNON55BFlFcBnTjq496990t23uljFJGtdO+HPoGJ6q6V9XDA6smt1zkA5H0z78a1E6vHYslutrux9piCpPnkDh3yFWbvigxJ+e3uR6LDBsPdOvjf8tXmi8o3pP2QY/QRc9uUNrn81pEIqttPetY=
        app:
          dev: kaagapai-dev
        on:
          repo: prometheus-tech/kaagapAI
          branches:
            only:
              - dev
notifications:
  email:
    - 2164149@slu.edu.ph
    - 2161495@slu.edu.ph
    - 2160809@slu.edu.ph
    - 2160120@slu.edu.ph
    - 2161745@slu.edu.ph
    - 2161436@slu.edu.ph
    - 2161794@slu.edu.ph
